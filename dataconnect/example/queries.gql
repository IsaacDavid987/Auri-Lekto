mutation CreateNewUser($email: String!, $passwordHash: String!, $username: String!, $createdAt: Timestamp!) @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  user_insert(data: {email: $email, passwordHash: $passwordHash, username: $username, createdAt: $createdAt})
}

query GetUserByUsername($username: String!) @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  users(where: {username: {eq: $username}}) {
    id
    email
    username
    displayName
    profilePictureUrl
  }
}

mutation UpdateUserDisplayName($id: UUID!, $displayName: String!) @auth(level: USER) {
  user_update(id: $id, data: {displayName: $displayName})
}

query ListCoursesForLanguage($languageId: UUID!) @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  courses(where: {languageId: {eq: $languageId}}) {
    id
    title
    description
    imageUrl
    level
  }
}